$(function(){function d(a){window.fullyLoaded&&$("body > section").each(function(){var a=$(window).scrollTop(),b=$(this).offset().top,c=$(this).next().offset().top;a>=b&&a<c?$('header nav a[href*="'+$(this).attr("id")+'"]').addClass("current"):$('header nav a[href*="'+$(this).attr("id")+'"]').removeClass("current")})}function e(){if(b){sentiment.draw(2250,300,"stacked");sentiment.attachScrollOnClick()}else sentiment.draw(2250,500,"stacked");words.init($("#words"),rwclib.wordData,rwclib.minuteData);players.draw()}var a="handheld and (max-width: 480px), screen and (max-device-width: 480px), screen and (max-width: 600px)",b=window.matchMedia(a).matches?!0:!1,c=$("header").outerHeight();updateLoadPerc=function(){var a=$("#loading-indicator"),b=$("#loading-perc"),c=a.width()/100;return function(a){a>=0&&a<=100&&b.text(a+"%").css("width",c*a)}}();$("body").css("cursor","wait");$(window).scroll(function(){d();$(this).scrollTop()>200?$("#back-to-top").fadeIn("fast"):$("#back-to-top").fadeOut("fast")});$("header nav a").click(function(){d()});$.getJSON("data/stats.json",function(a){rwclib.stats=a;rwclib.containerWidth=$("section").width();updateLoadPerc(25);$.getJSON("data/minutes.json",function(a){rwclib.minuteData=a;updateLoadPerc(50);$.getJSON("data/words.json",function(a){rwclib.wordData=a;updateLoadPerc(75);$.getJSON("data/events.json",function(a){rwclib.events=a;sentiment.init($("#graph"),rwclib.minuteData);if(b){sentiment.draw(2250,300,"stacked");sentiment.attachScrollOnClick()}else sentiment.draw(2250,500,"stacked");players.init($("#players-container"),rwclib.minuteData);players.draw();words.init($("#words"),rwclib.wordData,rwclib.minuteData);words.draw(_.keys(words.topFive));updateLoadPerc(100);window.fullyLoaded=!0;$("#loading-indicator").fadeOut(function(){$("body").css("cursor","pointer");$("body > section").hide().css({height:"auto",visibility:"visible"}).fadeIn()})})})})});$(window).resize(function(){clearTimeout(window.resizeInt);window.resizeInt=setTimeout(e,150)})});